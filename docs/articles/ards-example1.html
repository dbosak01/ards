<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Example 1: ARDS in Parallel • ards</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example 1: ARDS in Parallel">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ards</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../articles/ards.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ards-example1.html">Example 1: ARDS in Parallel</a></li>
    <li><a class="dropdown-item" href="../articles/ards-example2.html">Example 2: ARDS in Serial</a></li>
    <li><a class="dropdown-item" href="../articles/ards-faq.html">Frequently Asked Questions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href=".././articles/ards-faq.html">FAQ</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dbosak01/ards/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Example 1: ARDS in Parallel</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dbosak01/ards/blob/HEAD/vignettes/ards-example1.Rmd" class="external-link"><code>vignettes/ards-example1.Rmd</code></a></small>
      <div class="d-none name"><code>ards-example1.Rmd</code></div>
    </div>

    
    
<p>The functions in the <strong>ards</strong> package are written so
that they can be integrated into a standard Table, Listing, and Figure
(TLF) program. In some cases, the program does not even need to be
restructured to accommodate the <strong>ards</strong> functions. This
approach is called creating an ARDS in parallel.</p>
<div class="section level2">
<h2 id="parallel-ards-example">Parallel ARDS Example<a class="anchor" aria-label="anchor" href="#parallel-ards-example"></a>
</h2>
<p>Let us look at such an example. In this demonstration, we will create
the analysis for a Demographics table, and create the ARDS at the same
time.</p>
<p>A diagram of the parallel approach looks like this:</p>
<p><img src="../man/images/example1_diag.png" alt="ARDS in Parallel Diagram"></p>
<p>Note the following about the program below:</p>
<ul>
<li>The input data is a subset of 10 subjects and some relevant
variables to make the program easier to read and understand.</li>
<li>The <code><a href="../reference/init_ards.html">init_ards()</a></code> function is called once at the top of
the program. The values passed will be the same for all rows of the
ARDS.</li>
<li>The <code><a href="../reference/add_ards.html">add_ards()</a></code> function identifies variables in the
analysis dataset that you want to add to the ARDS. The variable values
will be extracted from the analysis data and transformed into the ARDS
structure.</li>
<li>The <code><a href="../reference/add_ards.html">add_ards()</a></code> function can be placed in the middle of
a data pipeline, and will not interfere with your analysis.</li>
<li>The <code><a href="../reference/add_ards.html">add_ards()</a></code> function is called immediately after the
calculations, before any formatting or transformations. The function is
called at this point so that the ARDS will contains the original numeric
values with full precision.</li>
<li>When the analysis is complete, the <code><a href="../reference/get_ards.html">get_ards()</a></code> is called
to retrieve the ARDS dataset. The ARDS dataset is a standard R data
frame that can be saved, combined with other analysis results, or passed
to another program for additional processing.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ards.r-sassy.org">ards</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create input data</span></span>
<span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span>header <span class="op">=</span> <span class="cn">TRUE</span>, text <span class="op">=</span> <span class="st">'</span></span>
<span><span class="st">STUDYID DOMAIN  USUBJID SUBJID  SITEID  BRTHDTC AGE AGEU    SEX RACE    ARMCD   ARM</span></span>
<span><span class="st">ABC DM  ABC-01-049  49  1   11/12/1966  39  YEARS   M   "WHITE"     4   "ARM D"</span></span>
<span><span class="st">ABC DM  ABC-01-050  50  1   12/19/1958  47  YEARS   M   "WHITE"     2   "ARM B"</span></span>
<span><span class="st">ABC DM  ABC-01-051  51  1   5/2/1972    34  YEARS   M   "WHITE"       1 "ARM A"</span></span>
<span><span class="st">ABC DM  ABC-01-052  52  1   6/27/1961   45  YEARS   F   "WHITE"     3   "ARM C"</span></span>
<span><span class="st">ABC DM  ABC-01-053  53  1   4/7/1980    26  YEARS   F   "WHITE"       2 "ARM B"</span></span>
<span><span class="st">ABC DM  ABC-01-054  54  1   9/13/1962   44  YEARS   M   "WHITE"       4 "ARM D"</span></span>
<span><span class="st">ABC DM  ABC-01-055  55  1   6/11/1959   47  YEARS   F   "BLACK OR AFRICAN AMERICAN" 3   "ARM C"</span></span>
<span><span class="st">ABC DM  ABC-01-056  56  1   5/2/1975    31  YEARS   M   "WHITE"       1 "ARM A"</span></span>
<span><span class="st">ABC DM  ABC-01-113  113 1   2/8/1932    74  YEARS   M   "WHITE"       4 "ARM D"'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create factors for categorical variables</span></span>
<span><span class="co"># to get zero counts</span></span>
<span><span class="va">adsl</span><span class="op">$</span><span class="va">SEX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">$</span><span class="va">SEX</span><span class="op">)</span></span>
<span><span class="va">adsl</span><span class="op">$</span><span class="va">RACE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">$</span><span class="va">RACE</span><span class="op">)</span></span>
<span><span class="va">adsl</span><span class="op">$</span><span class="va">ARM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">$</span><span class="va">ARM</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARM A"</span>, <span class="st">"ARM B"</span>, <span class="st">"ARM C"</span>, <span class="st">"ARM D"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Initalize ARDS</span></span>
<span><span class="fu"><a href="../reference/init_ards.html">init_ards</a></span><span class="op">(</span>studyid <span class="op">=</span> <span class="st">"ABC"</span>,</span>
<span>          tableid <span class="op">=</span> <span class="st">"01"</span>, adsns <span class="op">=</span> <span class="st">"adsl"</span>,</span>
<span>          population <span class="op">=</span> <span class="st">"safety population"</span>,</span>
<span>          time <span class="op">=</span> <span class="st">"SCREENING"</span>, where <span class="op">=</span> <span class="st">"saffl = TRUE"</span>, reset <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Perform analysis on AGE variable</span></span>
<span><span class="va">agedf</span> <span class="op">&lt;-</span> <span class="va">adsl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">AGE</span>, <span class="va">ARM</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ARM</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">)</span>,</span>
<span>            std <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">)</span>,</span>
<span>            median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">)</span>,</span>
<span>            min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">)</span>,</span>
<span>            max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">AGE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>analvar <span class="op">=</span> <span class="st">"AGE"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_ards.html">add_ards</a></span><span class="op">(</span>statvars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"mean"</span>, <span class="st">"std"</span>, <span class="st">"median"</span>, <span class="st">"min"</span>, <span class="st">"max"</span><span class="op">)</span>,</span>
<span>           statdesc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"Mean"</span>, <span class="st">"Std"</span>, <span class="st">"Median"</span>, <span class="st">"Min"</span>, <span class="st">"Max"</span><span class="op">)</span>,</span>
<span>           anal_var <span class="op">=</span> <span class="st">"AGE"</span>, trtvar <span class="op">=</span> <span class="st">"ARM"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">analvar</span>, <span class="va">ARM</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%d"</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span>            mean_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.1f (%.2f)"</span>, <span class="va">mean</span>, <span class="va">std</span><span class="op">)</span>,</span>
<span>            median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.1f"</span>, <span class="va">median</span><span class="op">)</span>,</span>
<span>            min_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.1f-%.1f"</span>, <span class="va">min</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">mean_sd</span>, <span class="va">median</span>, <span class="va">min_max</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"label"</span>, values_to <span class="op">=</span> <span class="st">"stats"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">ARM</span>,</span>
<span>              values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">stats</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">analvar</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">"Mean (Std)"</span>, <span class="st">"Median"</span>, <span class="st">"Min-Max"</span><span class="op">)</span>,</span>
<span>            trtA <span class="op">=</span> <span class="va">`ARM A`</span>, trtB <span class="op">=</span> <span class="va">`ARM B`</span>, trtC <span class="op">=</span> <span class="va">`ARM C`</span>, trtD <span class="op">=</span> <span class="va">`ARM D`</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View analysis results</span></span>
<span><span class="va">agedf</span></span>
<span><span class="co">#   # A tibble: 4 × 6</span></span>
<span><span class="co">#   analvar label      trtA        trtB         trtC        trtD        </span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;       </span></span>
<span><span class="co"># 1 AGE     N          2           2            2           3           </span></span>
<span><span class="co"># 2 AGE     Mean (Std) 32.5 (2.12) 36.5 (14.85) 46.0 (1.41) 52.3 (18.93)</span></span>
<span><span class="co"># 3 AGE     Median     32.5        36.5         46.0        44.0        </span></span>
<span><span class="co"># 4 AGE     Min-Max    31.0-34.0   26.0-47.0    45.0-47.0   39.0-74.0  </span></span>
<span></span>
<span><span class="co"># Get population counts</span></span>
<span><span class="va">trt_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">ARM</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">deframe</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trt_pop</span></span>
<span><span class="co"># ARM A ARM B ARM C ARM D </span></span>
<span><span class="co">#   2     2     2     3 </span></span>
<span></span>
<span><span class="co"># Perform analysis on SEX variable</span></span>
<span><span class="va">sexdf</span> <span class="op">&lt;-</span> <span class="va">adsl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>denom <span class="op">=</span> <span class="va">trt_pop</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">$</span><span class="va">ARM</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">SEX</span>, <span class="va">ARM</span>, <span class="va">denom</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>cnt <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">SEX</span>, <span class="va">ARM</span>, <span class="va">cnt</span>, analvar <span class="op">=</span> <span class="st">"SEX"</span>, label <span class="op">=</span> <span class="va">SEX</span>,  </span>
<span>            pct <span class="op">=</span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">denom</span><span class="op">)</span>, <span class="fl">0</span>, <span class="va">cnt</span> <span class="op">/</span> <span class="va">denom</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_ards.html">add_ards</a></span><span class="op">(</span>statvars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cnt"</span>, <span class="st">"pct"</span><span class="op">)</span>, statdesc <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>           anal_var <span class="op">=</span> <span class="st">"SEX"</span>, trtvar <span class="op">=</span> <span class="st">"ARM"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">ARM</span>,</span>
<span>              values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cnt</span>, <span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">analvar</span>, <span class="va">label</span>,</span>
<span>            trtA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM A`</span>, <span class="va">`pct_ARM A`</span><span class="op">)</span>,</span>
<span>            trtB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM B`</span>, <span class="va">`pct_ARM B`</span><span class="op">)</span>,</span>
<span>            trtC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM C`</span>, <span class="va">`pct_ARM C`</span><span class="op">)</span>,</span>
<span>            trtD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM D`</span>, <span class="va">`pct_ARM D`</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View analysis results</span></span>
<span><span class="va">sexdf</span></span>
<span><span class="co"># # A tibble: 2 × 6</span></span>
<span><span class="co"># analvar label trtA     trtB     trtC     trtD    </span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;fct&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   </span></span>
<span><span class="co"># 1 SEX     F     0 (  0%) 1 ( 50%) 2 (100%) 0 (  0%)</span></span>
<span><span class="co"># 2 SEX     M     2 (100%) 1 ( 50%) 0 (  0%) 3 (100%)</span></span>
<span></span>
<span><span class="co"># Perform analysis on RACE</span></span>
<span><span class="va">racedf</span> <span class="op">&lt;-</span> <span class="va">adsl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>denom <span class="op">=</span> <span class="va">trt_pop</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">$</span><span class="va">ARM</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">RACE</span>, <span class="va">ARM</span>, <span class="va">denom</span>, .drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>cnt <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">RACE</span>, <span class="va">ARM</span>, <span class="va">cnt</span>, analvar <span class="op">=</span> <span class="st">"RACE"</span>, label <span class="op">=</span> <span class="va">RACE</span>,  </span>
<span>            pct <span class="op">=</span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">denom</span><span class="op">)</span>, <span class="fl">0</span>, <span class="va">cnt</span> <span class="op">/</span> <span class="va">denom</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_ards.html">add_ards</a></span><span class="op">(</span>statvars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cnt"</span>, <span class="st">"pct"</span><span class="op">)</span>, statdesc <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>           anal_var <span class="op">=</span> <span class="st">"RACE"</span>, trtvar <span class="op">=</span> <span class="st">"ARM"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">ARM</span>,</span>
<span>              values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cnt</span>, <span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">analvar</span>, <span class="va">label</span>,</span>
<span>            trtA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM A`</span>, <span class="va">`pct_ARM A`</span><span class="op">)</span>,</span>
<span>            trtB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM B`</span>, <span class="va">`pct_ARM B`</span><span class="op">)</span>,</span>
<span>            trtC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM C`</span>, <span class="va">`pct_ARM C`</span><span class="op">)</span>,</span>
<span>            trtD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%1d (%3.0f%%)"</span>, <span class="va">`cnt_ARM D`</span>, <span class="va">`pct_ARM D`</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View analysis results</span></span>
<span><span class="va">racedf</span></span>
<span><span class="co"># # A tibble: 2 × 6</span></span>
<span><span class="co"># analvar   label                     trtA     trtB     trtC     trtD    </span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;fct&gt;                     &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   </span></span>
<span><span class="co"># 1 RACE    BLACK OR AFRICAN AMERICAN 0 (  0%) 0 (  0%) 1 ( 50%) 0 (  0%)</span></span>
<span><span class="co"># 2 RACE    WHITE                     2 (100%) 2 (100%) 1 ( 50%) 3 (100%)</span></span>
<span></span>
<span><span class="co"># Combine all analysis into final data frame</span></span>
<span><span class="va">final</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">agedf</span>, <span class="va">sexdf</span>, <span class="va">racedf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View final data frame</span></span>
<span><span class="co"># - This data frame is ready for reporting</span></span>
<span><span class="va">final</span></span>
<span><span class="co"># # A tibble: 8 × 6</span></span>
<span><span class="co"># analvar   label                     trtA        trtB         trtC        trtD        </span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;chr&gt;                     &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;       </span></span>
<span><span class="co"># 1 AGE     N                         2           2            2           3           </span></span>
<span><span class="co"># 2 AGE     Mean (Std)                32.5 (2.12) 36.5 (14.85) 46.0 (1.41) 52.3 (18.93)</span></span>
<span><span class="co"># 3 AGE     Median                    32.5        36.5         46.0        44.0        </span></span>
<span><span class="co"># 4 AGE     Min-Max                   31.0-34.0   26.0-47.0    45.0-47.0   39.0-74.0   </span></span>
<span><span class="co"># 5 SEX     F                         0 (  0%)    1 ( 50%)     2 (100%)    0 (  0%)    </span></span>
<span><span class="co"># 6 SEX     M                         2 (100%)    1 ( 50%)     0 (  0%)    3 (100%)    </span></span>
<span><span class="co"># 7 RACE    BLACK OR AFRICAN AMERICAN 0 (  0%)    0 (  0%)     1 ( 50%)    0 (  0%)    </span></span>
<span><span class="co"># 8 RACE    WHITE                     2 (100%)    2 (100%)     1 ( 50%)    3 (100%)  </span></span>
<span></span>
<span></span>
<span><span class="co"># Extract ARDS</span></span>
<span><span class="co"># - This data frame can be saved to disc or inserted into a database</span></span>
<span><span class="va">ards</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ards.html">get_ards</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Remove some variables to improve readability</span></span>
<span><span class="va">ards_reduced</span> <span class="op">&lt;-</span> <span class="va">ards</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">trtvar</span>, <span class="va">trtval</span>, <span class="va">anal_var</span>, <span class="va">anal_val</span>, </span>
<span>         <span class="va">statname</span>, <span class="va">statval</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">ards_reduced</span></span>
<span><span class="co">#    trtvar trtval anal_var                  anal_val statname    statval</span></span>
<span><span class="co"># 1     ARM  ARM A      AGE                      &lt;NA&gt;        n   2.000000</span></span>
<span><span class="co"># 2     ARM  ARM B      AGE                      &lt;NA&gt;        n   2.000000</span></span>
<span><span class="co"># 3     ARM  ARM C      AGE                      &lt;NA&gt;        n   2.000000</span></span>
<span><span class="co"># 4     ARM  ARM D      AGE                      &lt;NA&gt;        n   3.000000</span></span>
<span><span class="co"># 5     ARM  ARM A      AGE                      &lt;NA&gt;     mean  32.500000</span></span>
<span><span class="co"># 6     ARM  ARM B      AGE                      &lt;NA&gt;     mean  36.500000</span></span>
<span><span class="co"># 7     ARM  ARM C      AGE                      &lt;NA&gt;     mean  46.000000</span></span>
<span><span class="co"># 8     ARM  ARM D      AGE                      &lt;NA&gt;     mean  52.333333</span></span>
<span><span class="co"># 9     ARM  ARM A      AGE                      &lt;NA&gt;      std   2.121320</span></span>
<span><span class="co"># 10    ARM  ARM B      AGE                      &lt;NA&gt;      std  14.849242</span></span>
<span><span class="co"># 11    ARM  ARM C      AGE                      &lt;NA&gt;      std   1.414214</span></span>
<span><span class="co"># 12    ARM  ARM D      AGE                      &lt;NA&gt;      std  18.929694</span></span>
<span><span class="co"># 13    ARM  ARM A      AGE                      &lt;NA&gt;   median  32.500000</span></span>
<span><span class="co"># 14    ARM  ARM B      AGE                      &lt;NA&gt;   median  36.500000</span></span>
<span><span class="co"># 15    ARM  ARM C      AGE                      &lt;NA&gt;   median  46.000000</span></span>
<span><span class="co"># 16    ARM  ARM D      AGE                      &lt;NA&gt;   median  44.000000</span></span>
<span><span class="co"># 17    ARM  ARM A      AGE                      &lt;NA&gt;      min  31.000000</span></span>
<span><span class="co"># 18    ARM  ARM B      AGE                      &lt;NA&gt;      min  26.000000</span></span>
<span><span class="co"># 19    ARM  ARM C      AGE                      &lt;NA&gt;      min  45.000000</span></span>
<span><span class="co"># 20    ARM  ARM D      AGE                      &lt;NA&gt;      min  39.000000</span></span>
<span><span class="co"># 21    ARM  ARM A      AGE                      &lt;NA&gt;      max  34.000000</span></span>
<span><span class="co"># 22    ARM  ARM B      AGE                      &lt;NA&gt;      max  47.000000</span></span>
<span><span class="co"># 23    ARM  ARM C      AGE                      &lt;NA&gt;      max  47.000000</span></span>
<span><span class="co"># 24    ARM  ARM D      AGE                      &lt;NA&gt;      max  74.000000</span></span>
<span><span class="co"># 25    ARM  ARM A      SEX                         F      cnt   0.000000</span></span>
<span><span class="co"># 26    ARM  ARM B      SEX                         F      cnt   1.000000</span></span>
<span><span class="co"># 27    ARM  ARM C      SEX                         F      cnt   2.000000</span></span>
<span><span class="co"># 28    ARM  ARM D      SEX                         F      cnt   0.000000</span></span>
<span><span class="co"># 29    ARM  ARM A      SEX                         M      cnt   2.000000</span></span>
<span><span class="co"># 30    ARM  ARM B      SEX                         M      cnt   1.000000</span></span>
<span><span class="co"># 31    ARM  ARM C      SEX                         M      cnt   0.000000</span></span>
<span><span class="co"># 32    ARM  ARM D      SEX                         M      cnt   3.000000</span></span>
<span><span class="co"># 33    ARM  ARM A      SEX                         F      pct   0.000000</span></span>
<span><span class="co"># 34    ARM  ARM B      SEX                         F      pct  50.000000</span></span>
<span><span class="co"># 35    ARM  ARM C      SEX                         F      pct 100.000000</span></span>
<span><span class="co"># 36    ARM  ARM D      SEX                         F      pct   0.000000</span></span>
<span><span class="co"># 37    ARM  ARM A      SEX                         M      pct 100.000000</span></span>
<span><span class="co"># 38    ARM  ARM B      SEX                         M      pct  50.000000</span></span>
<span><span class="co"># 39    ARM  ARM C      SEX                         M      pct   0.000000</span></span>
<span><span class="co"># 40    ARM  ARM D      SEX                         M      pct 100.000000</span></span>
<span><span class="co"># 41    ARM  ARM A     RACE BLACK OR AFRICAN AMERICAN      cnt   0.000000</span></span>
<span><span class="co"># 42    ARM  ARM B     RACE BLACK OR AFRICAN AMERICAN      cnt   0.000000</span></span>
<span><span class="co"># 43    ARM  ARM C     RACE BLACK OR AFRICAN AMERICAN      cnt   1.000000</span></span>
<span><span class="co"># 44    ARM  ARM D     RACE BLACK OR AFRICAN AMERICAN      cnt   0.000000</span></span>
<span><span class="co"># 45    ARM  ARM A     RACE                     WHITE      cnt   2.000000</span></span>
<span><span class="co"># 46    ARM  ARM B     RACE                     WHITE      cnt   2.000000</span></span>
<span><span class="co"># 47    ARM  ARM C     RACE                     WHITE      cnt   1.000000</span></span>
<span><span class="co"># 48    ARM  ARM D     RACE                     WHITE      cnt   3.000000</span></span>
<span><span class="co"># 49    ARM  ARM A     RACE BLACK OR AFRICAN AMERICAN      pct   0.000000</span></span>
<span><span class="co"># 50    ARM  ARM B     RACE BLACK OR AFRICAN AMERICAN      pct   0.000000</span></span>
<span><span class="co"># 51    ARM  ARM C     RACE BLACK OR AFRICAN AMERICAN      pct  50.000000</span></span>
<span><span class="co"># 52    ARM  ARM D     RACE BLACK OR AFRICAN AMERICAN      pct   0.000000</span></span>
<span><span class="co"># 53    ARM  ARM A     RACE                     WHITE      pct 100.000000</span></span>
<span><span class="co"># 54    ARM  ARM B     RACE                     WHITE      pct 100.000000</span></span>
<span><span class="co"># 55    ARM  ARM C     RACE                     WHITE      pct  50.000000</span></span>
<span><span class="co"># 56    ARM  ARM D     RACE                     WHITE      pct 100.000000</span></span></code></pre></div>
<p>At this point, the analysis is complete, the output report has been
created, and the ARDS is available for sharing with stakeholders and
sending to downstream processes.</p>
<p>Next Steps: <a href="ards-example2.html">Example 2: ARDS in
Serial</a></p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Bosak.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
